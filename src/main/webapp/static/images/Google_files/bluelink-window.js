function Map(){this.keys=new Object()}Map.prototype.put=function(A,B){if(B==null){B=A}this.keys[A]=B};Map.prototype.get=function(B){var A=this.keys[B];return(typeof (A)=="undefined"||(A==undefined))?null:A};if(typeof (AdaptiveBlue)=="undefined"){AdaptiveBlue={};var JS_BASE="http://glueimg.s3.amazonaws.com/widgets/js/glue_widgets/";var OLD_JS="bluelink-window-old.js";var NEW_JS="glue-smartlinks.js";var TIP_JS="tip-smartlinks.js";var OLD_DEPS=[JS_BASE+"glue-jquery.js?v=2"];var NEW_DEPS=[JS_BASE+"glue-jquery.js?v=2",JS_BASE+"protocol.js"];var TIP_DEPS=[JS_BASE+"glue-jquery.js?v=2"];var IGNORED_SITES=["www.nytimes.com","nytimes.com","www.sethgodin.com","sethgodin.com","www.wisn.com","wisn.com"];AdaptiveBlue.Loader=new function(){this.paramString=B(document);this.scriptParams=D(this.paramString);this.loadScript=function(F){var E=document.createElement("script");E.setAttribute("type","text/javascript");E.setAttribute("src",F);document.getElementsByTagName("head")[0].appendChild(E)};this.loadSmartlinkScript=function(){var G=AdaptiveBlue.Loader.getParam(AdaptiveBlue.Loader.scriptParams,"blueSiteId","");var F=AdaptiveBlue.Loader.getParam(AdaptiveBlue.Loader.scriptParams,"newLook",G==""?"yes":"no");if(!C(window.location.hostname)){for(var E=0;E<TIP_DEPS.length;E++){AdaptiveBlue.Loader.loadScript(TIP_DEPS[E])}AdaptiveBlue.Loader.loadScript(JS_BASE+TIP_JS+"?"+AdaptiveBlue.Loader.paramString)}else{if(F=="yes"){for(var E=0;E<NEW_DEPS.length;E++){AdaptiveBlue.Loader.loadScript(NEW_DEPS[E])}AdaptiveBlue.Loader.loadScript(JS_BASE+NEW_JS+"?"+AdaptiveBlue.Loader.paramString)}else{for(var E=0;E<OLD_DEPS.length;E++){AdaptiveBlue.Loader.loadScript(OLD_DEPS[E])}AdaptiveBlue.Loader.loadScript(JS_BASE+OLD_JS+"?"+AdaptiveBlue.Loader.paramString)}}};function C(E){for(var F=0;F<IGNORED_SITES.length;F++){if(IGNORED_SITES[F]==E){return true}}return false}function A(){var E=window.location.hostname;return E.indexOf("simondemo.info")!=-1||E.indexOf("simonandschuster.")!=-1}this.getParam=function(E,F,G){return E.get(F)!=null?E.get(F):(window[F]!=null?window[F]:G)};function B(H){var F=H.getElementsByTagName("script");if(F!=null){for(var G=0;G<F.length;G++){var I=F[G].getAttribute("src");if(I!=null&&I.indexOf("bluelink-window.js")!=-1){var E=I.indexOf("?");if(E!=-1){return I.substring(E+1)}}}}return""}function D(H){var G=new Map();var F=H.split("&");for(var E=0;E<F.length;E++){var I=F[E].split("=");G.put(I[0],I[1])}return G}};if(window.blueSkipDefer=="yes"||AdaptiveBlue.Loader.getParam(AdaptiveBlue.Loader.scriptParams,"blueSkipDefer","no")=="yes"){AdaptiveBlue.Loader.loadSmartlinkScript()}else{if(navigator.userAgent.toLowerCase().indexOf("safari")!=-1){var timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(timer);AdaptiveBlue.Loader.loadSmartlinkScript()}},10)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){AdaptiveBlue.Loader.loadSmartlinkScript();this.removeEventListener("DOMContentLoaded",arguments.callee,false)},false)}else{if(window.attachEvent){window.attachEvent("onload",function(){AdaptiveBlue.Loader.loadSmartlinkScript();this.detachEvent("onload",arguments.callee)})}}}}};